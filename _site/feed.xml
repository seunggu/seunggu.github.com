<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>승구 개발 블로그</title>
    <description>A Blog dealing with JavaScript, NodeJS, AngularJS, Ionic, iOS, etc...
</description>
    <link>http://seunggu.github.io/</link>
    <atom:link href="http://seunggu.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 04 Jul 2016 15:39:46 +0900</pubDate>
    <lastBuildDate>Mon, 04 Jul 2016 15:39:46 +0900</lastBuildDate>
    <generator>Jekyll v3.1.2</generator>
    
      <item>
        <title>S3 Versioning에 대해 알아보기</title>
        <description>&lt;h2 id=&quot;s3-versioning&quot;&gt;1. S3 Versioning&lt;/h2&gt;

&lt;p&gt;최근에 S3을 주로 사용하는 프로젝트를 진행하고 있습니다.
비지니스 로직에 필요한 부분이 같은 파일(같은 S3 key를 가지는 파일)을 조금씩 수정하여 S3에 저장하는
프로세스가 있어 S3에 문서를 훓어 보다가 &lt;code class=&quot;highlighter-rouge&quot;&gt;S3 Versioning&lt;/code&gt;이라는 것을 발견했습니다.
단순히 설명을 하면, Git처럼 S3에 올린 파일에 대해서 버전관리를 해주는 것인데요.
비지니스 로직이 단순히 S3에 파일을 저장하고 그게 끝이라면 딱히 필요없는 기능이지만,
현재 진행하는 프로젝트처럼 동일한 파일을 다시 자주하는 수정하는 로직이 필요하다면 
생각해볼만한 좋은 기능입니다.
&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;version-id&quot;&gt;2. Version id&lt;/h2&gt;

&lt;p&gt;S3에 Bucket은 기본적으로 Versioning이 켜지지 않은 상태로 되어있고 
Versioning은 &lt;strong&gt;Bucket 단위&lt;/strong&gt;로만 켜고 끌 수 있습니다.
Versioning을 시작하려면 AWS Console에서는 간단히 변경할 수 있습니다.
아래의 사진처럼 Bucket Property에 Versioning 관련 속성이 있어서 
&lt;strong&gt;Enable Versioning&lt;/strong&gt; 버튼만 누르면
해당 Bucket은 Versioning이 켜지게 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/s3-versioning/console.png&quot; alt=&quot;s3-console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Bucket의 Object(파일)은 Versioning이 켜져 있든 아니든 
모두 &lt;code class=&quot;highlighter-rouge&quot;&gt;version id&lt;/code&gt; 메타데이터를 가지고 있습니다.
그리고 Versioning이 꺼져 있을 경우는 &lt;strong&gt;null&lt;/strong&gt; 값을 가지게 되고 
Versioning을 키고 Object를 업로드 할 경우에 &lt;code class=&quot;highlighter-rouge&quot;&gt;version id&lt;/code&gt;에 S3에서 &lt;strong&gt;자동&lt;/strong&gt;으로 지정하게 됩니다.
이렇게 Versioning을 &lt;code class=&quot;highlighter-rouge&quot;&gt;version id&lt;/code&gt;를 기준으로 작동하게 됩니다.
(예를 들면 Git의 &lt;strong&gt;commit hash&lt;/strong&gt;와 비슷하다고 볼 수 있습니다.)
&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;current-vs-noncurrent&quot;&gt;3. current vs noncurrent&lt;/h2&gt;

&lt;p&gt;S3 Versioning은 이 version id를 가지고 Object들을 관리하게 됩니다.
기존에 파일을 하나 업로드한 뒤 S3 Key가 동일하도록 같은 이름의 파일을 다시 업로드 하면
Versioning은 기존 파일 위에 파일을 저장하게 됩니다.
그리고 파일에 접근 할 땐 제일 최근의 것으로 접근하게 됩니다.
여기서 제일 최근의 Object를 &lt;code class=&quot;highlighter-rouge&quot;&gt;current version&lt;/code&gt;라 부르고 
기존의 Object를 &lt;code class=&quot;highlighter-rouge&quot;&gt;noncurrent version&lt;/code&gt;이라 부릅니다.
S3 Key를 이용하여 Object를 불러오면 &lt;code class=&quot;highlighter-rouge&quot;&gt;current version&lt;/code&gt;의 Object를 가져오지만
&lt;code class=&quot;highlighter-rouge&quot;&gt;noncurrent version&lt;/code&gt;의 Object를 가져오려면 &lt;strong&gt;version id&lt;/strong&gt;를 사용하여 가져 올 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/s3-versioning/version-id-console.png&quot; alt=&quot;version-id-console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;delete-marker&quot;&gt;4. Delete Marker&lt;/h2&gt;

&lt;p&gt;당연히 Versioning을 이용하면 삭제된 Object도 복구 할 수 있습니다.
이런 기능이 가능한 이유는 Versioning을 켜놓았을 경우 S3는 해당 Object를 삭제 하지 않습니다.
그 대신 Version id &lt;code class=&quot;highlighter-rouge&quot;&gt;Delete Marker&lt;/code&gt;를 &lt;strong&gt;current version&lt;/strong&gt;으로 설정합니다.
그래서 삭제한 경우엔 &lt;strong&gt;current version&lt;/strong&gt;이 &lt;code class=&quot;highlighter-rouge&quot;&gt;Delete Marker&lt;/code&gt;이기 때문에
삭제된 문서로 인식하지만, &lt;strong&gt;noncurrent version&lt;/strong&gt;의 Object로 
언제든지 복구가능하고 가져 올 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/s3-versioning/delete-marker.png&quot; alt=&quot;delete-marker&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/s3-versioning/delete-marker-console.png&quot; alt=&quot;delete-maker-console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;lifecycle-configuration-for-a-bucket-with-versioning&quot;&gt;5. Lifecycle Configuration for a Bucket with Versioning&lt;/h2&gt;

&lt;p&gt;기본적으로 S3는 &lt;code class=&quot;highlighter-rouge&quot;&gt;Lifecyle Configuration&lt;/code&gt;을 지원합니다.
간단한 예를 들면, 만약 프로젝트에서 S3에 Object를 생성하고 
해당 Object가 생성 후 1년뒤에 필요가 없어진다면 
굳이 필요없는 Object를 저장해 둘 필요가 없습니다.
S3는 저장된 용량에 따라 월비용을 내야되기 때문에 
사용하지 않는 Object는 지워주는게 비용을 절감할 수 있습니다.
&lt;code class=&quot;highlighter-rouge&quot;&gt;Lifecyle Configuration&lt;/code&gt;을 통해 Object를 생성 후 1년뒤에 삭제되도록 설정하면
자동으로 지워지게 되기 때문에 신경을 크게 쓰지않고 비용을 절감 할 수 있습니다&lt;/p&gt;

&lt;p&gt;Versioning의 좋은 점은 &lt;strong&gt;current version&lt;/strong&gt;과 &lt;strong&gt;noncurrent version&lt;/strong&gt;에 대해
각각 따로 &lt;code class=&quot;highlighter-rouge&quot;&gt;Lifecyle Configuration&lt;/code&gt;이 가능하기 때문에 더욱 쉽게 Object들을 관리하여
비용을 절감 할 수 있습니다. 저도 이 장점이 Versioning을 사용하게된 큰 이유 중 하나입니다.
(Lifecycle에 대한 내용은 이 글에서 주제에 벗어나므로 참고자료에 링크 걸어 두었습니다)
&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;6. 장점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;version에 따른 Lifecycle Configuration이 가능하다.&lt;/li&gt;
  &lt;li&gt;같은 파일에 대해 덮어쓸 때 기존의 데이터도 보관하고 싶은데 비용이 걱정될 때가 적절하다.&lt;/li&gt;
  &lt;li&gt;Versioning을 사용하지 않을 때와 비용하여 동일한 
Object를 삭제할 때 일일이 찾아서 삭제 하지않고 한번에 삭제 가능하다.&lt;/li&gt;
  &lt;li&gt;삭제한 Object를 복구할 수 있다.
&lt;br /&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;7. 단점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;아무래도 널리 사용되는 S3의 기능이 아니다 보니 다른 개발자가 와서 일을 할 시에 배워야한다.&lt;/li&gt;
  &lt;li&gt;Bucket 단위로만 Versioning 설정이 되어 아쉽다.
&lt;br /&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-2&quot;&gt;8. 참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/ObjectVersioning.html&quot;&gt;AWS 공식 문서(Object Lifecycle Management)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html&quot;&gt;AWS 공식 문서(Using Versioning)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/UG/lifecycle-configuration-bucket-with-versioning.html&quot;&gt;AWS 공식 문서(Lifecycle Configuration for a Bucket with Versioning)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Mon, 04 Jul 2016 14:24:00 +0900</pubDate>
        <link>http://seunggu.github.io/aws/2016/07/04/s3-versioning.html</link>
        <guid isPermaLink="true">http://seunggu.github.io/aws/2016/07/04/s3-versioning.html</guid>
        
        <category>aws,</category>
        
        <category>s3,</category>
        
        <category>s3</category>
        
        <category>versioning</category>
        
        
        <category>aws</category>
        
      </item>
    
      <item>
        <title>반갑습니다</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;반갑습니다!&lt;/h2&gt;

&lt;p&gt;예전부터 미뤄온 일을 하는 것처럼 막막하고 어떻게 시작해야될지 깜깜하지만
이렇게 시작을 하다가 보면 습관이 되고 더욱 편해질 것 같아 &lt;strong&gt;시작이 반&lt;/strong&gt;이라는 마음으로 첫 블로그 글을 써 내려가 봅니다.&lt;/p&gt;

&lt;p&gt;매일 개발을 하면서 느끼는 것도 있고 배워가는 것들이 많지만, 
이렇게 글을 쓰거나 메모를 하지 않으면 금새 잊혀져가는게 안타깝고
다른 개발자분들과 공유하며 피드백도 받고 싶어 시작하게 되었습니다.&lt;/p&gt;

&lt;p&gt;많은 이야기를 함께 했으면 좋겠습니다.&lt;/p&gt;
</description>
        <pubDate>Sun, 03 Jul 2016 06:52:00 +0900</pubDate>
        <link>http://seunggu.github.io/%EC%9D%B8%EC%82%AC/2016/07/03/greeting.html</link>
        <guid isPermaLink="true">http://seunggu.github.io/%EC%9D%B8%EC%82%AC/2016/07/03/greeting.html</guid>
        
        <category>인사</category>
        
        
        <category>인사</category>
        
      </item>
    
  </channel>
</rss>
